# ============================================================================
# Tmux Configuration (Nord Theme)
# Inspired by https://github.com/joaofelipegalvao/omarchy-tmux
# ============================================================================
# Part of Danny's dotfiles
# https://blog.dmcc.io/dotfiles/
# ============================================================================

# Nord Color Palette
# nord0  #2e3440 (black/bg)
# nord1  #3b4252 (dark gray)
# nord2  #434c5e (gray)
# nord3  #4c566a (bright black)
# nord4  #d8dee9 (white)
# nord6  #eceff4 (bright white)
# nord7  #8fbcbb (cyan)
# nord8  #88c0d0 (bright cyan)
# nord9  #81a1c1 (blue)
# nord10 #5e81ac (dark blue)

#+---------+
#+ Options +
#+---------+
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB"
set -g status-interval 1
set -g status on
set -g mouse on
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on

# Detach instead of exit when closing last window
set -g detach-on-destroy on

# Faster key repetition
set -s escape-time 0

# Increase scrollback buffer size
set -g history-limit 50000

#+--------+
#+ Status +
#+--------+
set -g status-justify left
set -g status-style "bg=#2e3440,fg=#eceff4"
set -g status-left-length 100
set -g status-right-length 100

# Status left: session name
set -g status-left "#[fg=#2e3440,bg=#81a1c1,bold] #S #[fg=#81a1c1,bg=#2e3440,nobold]"

# Status right: date and time, hostname
set -g status-right "#[fg=#4c566a,bg=#2e3440]#[fg=#eceff4,bg=#4c566a] %Y-%m-%d #[fg=#eceff4,bg=#4c566a] %H:%M #[fg=#8fbcbb,bg=#4c566a]#[fg=#2e3440,bg=#8fbcbb,bold] #H "

#+--- Windows ---+
set -g window-status-format "#[fg=#2e3440,bg=#4c566a] #[fg=#eceff4,bg=#4c566a]#I  #W #F #[fg=#4c566a,bg=#2e3440]"
set -g window-status-current-format "#[fg=#2e3440,bg=#8fbcbb] #[fg=#2e3440,bg=#8fbcbb]#I  #W #F #[fg=#8fbcbb,bg=#2e3440]"
set -g window-status-separator ""

#+-------+
#+ Panes +
#+-------+
set -g pane-border-style "bg=default,fg=#4c566a"
set -g pane-active-border-style "bg=default,fg=#8fbcbb"
set -g display-panes-colour "#2e3440"
set -g display-panes-active-colour "#4c566a"

#+------------+
#+ Clock Mode +
#+------------+
setw -g clock-mode-colour "#8fbcbb"

#+----------+
#+ Messages +
#+----------+
set -g message-style "bg=#434c5e,fg=#8fbcbb"
set -g message-command-style "bg=#434c5e,fg=#8fbcbb"

#+------+
#+ Keys +
#+------+
# Prefix key (Ctrl+a instead of Ctrl+b)
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Reload config
bind r source-file ~/.config/tmux/tmux.conf \; display "Config reloaded!"

# Split panes using | and -
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# Navigate panes with vim keys
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Resize panes with vim keys
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# New window in current path
bind c new-window -c "#{pane_current_path}"

#+------------+
#+ Clipboard +
#+------------+
# Vi copy mode bindings
setw -g mode-keys vi
bind-key -T copy-mode-vi 'v' send -X begin-selection
bind-key -T copy-mode-vi 'y' send -X copy-selection-and-cancel

# Enable clipboard integration with iTerm2
set -g set-clipboard on
